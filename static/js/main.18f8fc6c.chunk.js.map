{"version":3,"sources":["App.js","index.js"],"names":["utils","nearAPI","TGas","Big","pow","ContractName","mul","App","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","state","connected","signedIn","accountId","contract_sign_accountId","new_crowdfunding_theme","new_crowdfunding_receiver","new_crowdfunding_funding_goal","crowdFunding_campagins","Array","crowdFunding_funding_map","Map","crowdFunding_fundings","crowdfunding_num","crowdfunding_goal","handleNewCrowdChange","bind","_assertThisInitialized","handleNewReceiverChange","handleNewFundingGoalChange","createNewCrowdSubmit","sendCrowdFundGoalSubmit","_initNear","then","setState","_accountId","_createClass","key","value","event","console","log","target","this","createNewCrowd","preventDefault","_createNewCrowd","_asyncToGenerator","_regeneratorRuntime","mark","_callee","num_campagins","wrap","_context","prev","next","_contract","newCampaign","Number","sent","alert","refreshAccountStats","stop","apply","arguments","bidCrowdFund","_bidCrowdFund","_callee2","funder_number","_context2","_account","functionCall","contractId","methodName","args","gas","attachedDeposit","format","parseNearAmount","_initNear2","_callee3","nearConfig","keyStore","near","_context3","networkId","nodeUrl","contractName","walletUrl","BrowserLocalStorageKeyStore","Object","assign","deps","_keyStore","_nearConfig","_near","_walletConnection","getAccountId","account","viewMethods","changeMethods","_refreshAccountStats","_callee4","crowdFunding_campagin_arry","i","crowdFunding_campagin_item","crowdFunding_funding_arry","_context4","get_all_crowdFunding","length","push","get_funders_by_num_campagins","set","_requestSignIn","_callee5","_context5","requestSignIn","_logOut","_callee6","_context6","signOut","_this2","content","React","createElement","className","onClick","logOut","style","marginTop","onSubmit","type","marginLeft","onChange","fontSize","map","item","theme","receiver","funding_goal","number_funders","total_amount","get","undefined","item12","addr","amount","handlewCrowdFundingNumChange","handlewCrowdFundingGoalChange","marginBottom","role","aria-hidden","Component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.18f8fc6c.chunk.js","sourcesContent":["import \"./App.css\";\nimport React from 'react';\n// import BN from 'bn.js';\nimport * as nearAPI from 'near-api-js'\nimport Big from 'big.js';\n\nconst { keyStores, KeyPair, connect, utils} = nearAPI;\n\ninterface CrowdFunding {\n  num_campagins: number;  //活动编号\n  theme: string;\n  receiver: string;\n  funding_goal: number;\n  number_funders: number;\n  total_amount: number;\n} \n\ninterface Funder {\n  num_campagins: number;\n  addr: string;\n  amount: number;\n} \n\nconst TGas = Big(10).pow(12);\nconst BoatOfGas = Big(200).mul(TGas);\n\nconst ContractName = 'contract1234501.testnet';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    /**\n     * 上下文信息（合约信息，页面信息等）\n     */\n    this.state = {\n      connected: false, //\n      signedIn: false,  //是否已经登陆钱包\n      accountId: null,  //募捐活动合约授权账户（只有此账户才有权创建募捐活动）\n\n      //contract_accountId: \"contract1234501.testnet\",  //合约账户（合约已经部署到NEAR测试链上，合约授权账户为：owner123.testnet）\n      contract_sign_accountId: \"owner123.testnet\",  //合约授权账户\n\n      //创建募捐合同\n      new_crowdfunding_theme:\"\",\n      new_crowdfunding_receiver:\"\",\n      new_crowdfunding_funding_goal:0, \n\n      //募捐活动信息\n      crowdFunding_campagins: new Array(),\n      crowdFunding_funding_map : new Map(), //key：活动编号；value：参与人列表\n      crowdFunding_fundings : new Array(), \n\n      //\n      crowdfunding_num:0,\n      crowdfunding_goal:0,\n    };\n\n    this.handleNewCrowdChange = this.handleNewCrowdChange.bind(this);\n    this.handleNewReceiverChange = this.handleNewReceiverChange.bind(this);\n    this.handleNewFundingGoalChange = this.handleNewFundingGoalChange.bind(this);\n    this.createNewCrowdSubmit = this.createNewCrowdSubmit.bind(this);\n    this.sendCrowdFundGoalSubmit = this.sendCrowdFundGoalSubmit.bind(this);\n\n\n    this._initNear().then(() => {\n      this.setState({\n        connected: true,\n        signedIn: !!this._accountId,\n        accountId: this._accountId,\n      });\n    }); \n  }\n\n  handleNewCrowdChange(event) {\n    console.log(\"募捐活动名称：\" + event.target.value);\n    this.setState({new_crowdfunding_theme: event.target.value});\n  }\n\n  handleNewReceiverChange(event) {\n    console.log(\"募捐活动接收账户：\" + event.target.value);\n    this.setState({new_crowdfunding_receiver: event.target.value});\n  }\n\n  handleNewFundingGoalChange(event) {\n    console.log(\"募捐活动筹集目标金额：\" + event.target.value);\n    this.setState({new_crowdfunding_funding_goal: event.target.value});\n  }\n\n  handlewCrowdFundingNumChange(event) {\n    console.log(\"参与募捐活动的编号：\" + event.target.value);\n    this.setState({crowdfunding_num: event.target.value});\n  }\n\n  handlewCrowdFundingGoalChange(event) {\n    console.log(\"参与募捐的金额：\" + event.target.value);\n    this.setState({crowdfunding_goal: event.target.value});\n  }\n\n  createNewCrowdSubmit(event) {\n    this.createNewCrowd();\n    event.preventDefault();\n  }\n\n  async createNewCrowd() {\n    let num_campagins = await this._contract.newCampaign({\"theme\":this.state.new_crowdfunding_theme, \"receiver\":this.state.new_crowdfunding_receiver, \"number_funders\":0, \"funding_goal\":Number(this.state.new_crowdfunding_funding_goal)});\n    if(num_campagins > 0 ) {\n      alert(\"合约创建成功，合约编号：\" + num_campagins);\n      if (this._accountId) {\n        await this.refreshAccountStats();\n      }\n    }\n  }\n\n  sendCrowdFundGoalSubmit(event) {\n    this.bidCrowdFund();\n    event.preventDefault();\n  }\n\n  async bidCrowdFund() {\n    let funder_number = await this._account.functionCall({\n                                                    contractId: ContractName,\n                                                    methodName: \"bid\",\n                                                    args: {\n                                                      num_campagins: Number(this.state.crowdfunding_num),\n                                                    },\n                                                    gas: \"300000000000000\",\n                                                    attachedDeposit: utils.format.parseNearAmount(this.state.crowdfunding_goal),\n                                                  });\n    //let funder_number = await this._contract.bid({\"num_campagins\":Number(this.state.crowdfunding_num)});\n    if(funder_number > 0 ) {\n      console.log(\"第：\" + funder_number + \"位捐赠人\");\n      if (this._accountId) {\n        await this.refreshAccountStats();\n      }\n    }\n  }\n\n  async _initNear() {\n    const nearConfig = {\n      networkId: 'default',\n      nodeUrl: 'https://rpc.testnet.near.org',\n      contractName: ContractName,\n      walletUrl: 'https://wallet.testnet.near.org',\n    };\n    const keyStore = new nearAPI.keyStores.BrowserLocalStorageKeyStore();\n    const near = await nearAPI.connect(Object.assign({ deps: { keyStore } }, nearConfig));\n    this._keyStore = keyStore;\n    this._nearConfig = nearConfig;\n    this._near = near;\n\n    this._walletConnection = new nearAPI.WalletConnection(near, ContractName);\n    this._accountId = this._walletConnection.getAccountId();\n    this._account = this._walletConnection.account();\n    //\n    console.log(\"_accountId=\" + this._accountId + \", _account=\" + this._account);\n    //\n    \n    this._contract = new nearAPI.Contract(this._account, ContractName, {\n      viewMethods: ['get_crowdFunding_by_num_campagins', 'get_all_crowdFunding', 'get_funders_by_num_campagins'],\n      changeMethods: ['newCampaign', 'bid'],\n    });\n\n    if (this._accountId) {\n      await this.refreshAccountStats();\n    }\n  }\n\n  async refreshAccountStats() {\n    let crowdFunding_campagin_arry:CrowdFunding[]|undefined|null = await this._contract.get_all_crowdFunding();\n    for(var i=0; i<crowdFunding_campagin_arry.length; i++){\n      let crowdFunding_campagin_item = crowdFunding_campagin_arry[i];\n      crowdFunding_campagin_item.num_campagins = i + 1;\n      this.state.crowdFunding_campagins.push(crowdFunding_campagin_item);\n      //\n      let crowdFunding_funding_arry:Funder[]|undefined|null = await this._contract.get_funders_by_num_campagins({num_campagins: crowdFunding_campagin_item.num_campagins});\n      if(crowdFunding_funding_arry.length > 0 ) {\n        this.state.crowdFunding_funding_map.set(crowdFunding_campagin_item.num_campagins, crowdFunding_funding_arry);\n      }\n    }\n  }\n\n  async requestSignIn() {\n    const appTitle = '去中心化募捐平台';\n    await this._walletConnection.requestSignIn(\n      ContractName,\n      appTitle\n    )\n  }\n\n  async logOut() {\n    this._walletConnection.signOut();\n    this._accountId = null;\n    this.setState({\n      signedIn: !!this._accountId,\n      accountId: this._accountId,\n    })\n  }\n\n  render() {\n    console.log(\"call render().\");\n    const content = !this.state.connected ? (\n      <div>\n        正在链接NEAR钱包 ...\n        <span className=\"spinner-grow spinner-grow-sm\" role=\"status\" aria-hidden=\"true\"></span>\n      </div>\n    ) : (this.state.signedIn ? (\n      <div>\n        <div className=\"float-right\">\n          <button className=\"btn btn-outline-secondary\" onClick={() => this.logOut()}>退出</button>\n        </div>\n        <h5><span className=\"font-weight-bold\">当前登陆NEAR账号：{this.state.accountId}</span></h5>\n        <div>\n      </div>\n      {\n        this.state.contract_sign_accountId === this.state.accountId ? \n        <div>\n          <h6><span className=\"font-weight-bold\">您有权创建募捐活动</span></h6>\n          <hr></hr>\n          <label style={{marginTop:\"10px\"}}> 〓 创建募捐活动〓 </label>\n          <form onSubmit={this.createNewCrowdSubmit}>\n            <label>活动名称： <input type=\"text\" style={{marginLeft:\"10px\"}} value={this.state.new_crowdfunding_theme} onChange={(event) => {this.handleNewCrowdChange(event)}} /> </label><br/>\n            <label>接收募捐账户：<input type=\"text\" style={{marginLeft:\"10px\"}} value={this.state.new_crowdfunding_receiver} onChange={(event) => {this.handleNewReceiverChange(event)}} /> </label><br/>\n            <label>募捐目标金额： <input type=\"number\" style={{marginLeft:\"10px\"}} value={this.state.new_crowdfunding_funding_goal} onChange={(event) => {this.handleNewFundingGoalChange(event)}} /> </label><br/>\n            <input type=\"submit\" value=\"提交\" />\n          </form>\n\n          <hr></hr>\n          <div style={{fontSize: '16px'}}>\n          <label> 〓 已创建的募捐活动列表 〓 </label> <br/>\n            {\n                this.state.crowdFunding_campagins.map(item=>(\n                    <li key={item} >『编号』：{item.num_campagins +\", \"} 『活动名称』：{item.theme +\", \"} 『募捐接收账户』：{item.receiver + \", \" } 『募资目标金额』：{item.funding_goal + \"NEAR, \" } 『募资参与人数』：{item.number_funders + \", \"}  『已经募集的金额』：{item.total_amount + \" yoctoNEAR\"} \n                      <br/>\n                      <label style={{fontSize: '13px'}}>  ✿ 募捐人列表 </label> <br/>\n                      <div style={{fontSize: '10px'}}>\n                        {\n                          this.state.crowdFunding_funding_map.get(item.num_campagins) != null && this.state.crowdFunding_funding_map.get(item.num_campagins) != undefined && this.state.crowdFunding_funding_map.get(item.num_campagins).length > 0 ? (\n                            this.state.crowdFunding_funding_map.get(item.num_campagins).map(item12=>(\n                              <div key={item12}> ◦  捐赠人地址：{item12.addr +\", \"} 捐赠金额：{item12.amount + \" yoctoNEAR\"} <br/></div>\n                            )  \n                          )\n                          ):(\n                              <label> 无捐赠人.</label> \n                          )\n                        }\n                      </div>\n                    </li>\n                  ))\n            }\n          </div>\n          <br/>\n          \n          <hr></hr>\n        </div>\n        \n       : \n       \n        <div>\n          <h6><span className=\"font-weight-bold\">欢迎您参与募捐活动</span></h6>\n          <hr></hr>\n          <label> 请选择您要参与的募捐活动 </label> <br/>\n          {\n            (\n            this.state.crowdFunding_campagins.map(item=>(\n              <label>\n                『编号』: {item.num_campagins +\", \"} 『活动名称』: {item.theme +\", \"} 『募捐接收账户』: {item.receiver + \", \" } 『募捐人数』: {item.number_funders}\n                <br/>\n              </label>\n            ))\n            )\n          }\n          <hr></hr>\n          <form onSubmit={this.sendCrowdFundGoalSubmit}>\n            <label>活动编号： <input type=\"text\" style={{marginLeft:\"10px\"}} value={this.state.crowdfunding_num} onChange={(event) => {this.handlewCrowdFundingNumChange(event)}} /> (-请选择上面的活动编号-)</label><br/>\n            <label>募捐金额： <input type=\"number\" style={{marginLeft:\"10px\"}} value={this.state.crowdfunding_goal} onChange={(event) => {this.handlewCrowdFundingGoalChange(event)}} /> NEAR</label><br/>\n            <input type=\"submit\" value=\"提交\" />\n          </form>\n        </div>\n      }\n      </div>\n    ) : (\n      <div style={{ marginBottom: \"10px\" }}>\n        <button\n          className=\"btn btn-primary\"\n          onClick={() => this.requestSignIn()}>登陆NEAR钱包</button>\n      </div>\n    ));\n    return (\n        <div className=\"px-5\">\n          <h1>NEAR去中心化募捐活动平台</h1>\n          <span className=\"font-weight-light\">(提示⚠️：募捐活动合约已经部署到测试链，合约账户：{ContractName}，授权账户：{this.state.contract_sign_accountId})</span>\n          {content}\n        </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n    <App />, \n    document.getElementById('root')\n);\n"],"sourceRoot":""}