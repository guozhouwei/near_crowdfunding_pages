{"version":3,"sources":["App.js","index.js"],"names":["utils","nearAPI","TGas","Big","pow","App","mul","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","state","connected","signedIn","accountId","balance","contract_accountId","contract_sign_accountId","new_crowdfunding_theme","new_crowdfunding_receiver","new_crowdfunding_funding_goal","crowdFunding_campagins","Array","crowdFunding_funding_map","Map","crowdFunding_fundings","crowdfunding_num","crowdfunding_goal","handleNewCrowdChange","bind","_assertThisInitialized","handleNewReceiverChange","handleNewFundingGoalChange","createNewCrowdSubmit","sendCrowdFundGoalSubmit","_initNear","then","setState","_accountId","_balance","_createClass","key","value","event","console","log","target","this","createNewCrowd","preventDefault","_createNewCrowd","_asyncToGenerator","_regeneratorRuntime","mark","_callee","num_campagins","wrap","_context","prev","next","_contract","newCampaign","Number","sent","alert","refreshAccountStats","stop","apply","arguments","bidCrowdFund","_bidCrowdFund","_callee2","funder_number","_context2","_account","functionCall","contractId","methodName","args","gas","attachedDeposit","format","parseNearAmount","_withdrawToReceiver","_callee3","numCampagins","accountBalance","_context3","window","confirm","withdraw_to_receiver","_x","_initNear2","_callee4","nearConfig","keyStore","near","_context4","networkId","nodeUrl","contractName","walletUrl","BrowserLocalStorageKeyStore","Object","assign","deps","_keyStore","_nearConfig","_near","_walletConnection","getAccountId","account","getAccountBalance","total","viewMethods","changeMethods","_refreshAccountStats","_callee5","crowdFunding_campagin_arry","i","crowdFunding_campagin_item","crowdFunding_funding_arry","_context5","get_all_crowdFunding","length","push","get_funders_by_num_campagins","set","_requestSignIn","_callee6","_context6","requestSignIn","_logOut","_callee7","_context7","signOut","_this2","YOCTO_TO_NEAR","content","React","createElement","className","onClick","logOut","style","marginTop","onSubmit","type","marginLeft","onChange","fontSize","map","item","theme","receiver","funding_goal","number_funders","total_amount","get","undefined","item12","addr","amount","withdraw_amount","withdrawToReceiver","handlewCrowdFundingNumChange","handlewCrowdFundingGoalChange","marginBottom","role","aria-hidden","Component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5a0e4a57.chunk.js","sourcesContent":["import \"./App.css\";\nimport React from 'react';\n// import BN from 'bn.js';\nimport * as nearAPI from 'near-api-js'\nimport Big from 'big.js';\n\nconst { keyStores, KeyPair, connect, utils} = nearAPI;\n\ninterface CrowdFunding {\n  num_campagins: number;  //活动编号\n  theme: string;\n  receiver: string;\n  funding_goal: number;\n  number_funders: number;\n  total_amount: number;\n} \n\ninterface Funder {\n  num_campagins: number;\n  addr: string;\n  amount: number;\n} \n\nconst TGas = Big(10).pow(12);\nconst BoatOfGas = Big(200).mul(TGas);\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    /**\n     * 上下文信息（合约信息，页面信息等）\n     */\n    this.state = {\n      connected: false, //\n      signedIn: false,  //是否已经登陆钱包\n      accountId: null,  //当前登陆账户（1 合约账户，2 权限账户（募捐活动合约授权账户（只有此账户才有权创建募捐活动））3 募捐人账户）\n      balance: null, //当前登陆账户的余额\n\n      contract_accountId: \"support123.testnet\",  //合约账户（合约已经部署到NEAR测试链上，合约授权账户为：owner123.testnet）\n      contract_sign_accountId: \"owner123.testnet\",  //合约授权账户\n\n      //创建募捐合同\n      new_crowdfunding_theme:\"\",\n      new_crowdfunding_receiver:\"\",\n      new_crowdfunding_funding_goal:0, \n\n      //募捐活动信息\n      crowdFunding_campagins: new Array(),\n      crowdFunding_funding_map : new Map(), //key：活动编号；value：参与人列表\n      crowdFunding_fundings : new Array(), \n\n      //\n      crowdfunding_num:0,\n      crowdfunding_goal:0,\n    };\n\n    this.handleNewCrowdChange = this.handleNewCrowdChange.bind(this);\n    this.handleNewReceiverChange = this.handleNewReceiverChange.bind(this);\n    this.handleNewFundingGoalChange = this.handleNewFundingGoalChange.bind(this);\n    this.createNewCrowdSubmit = this.createNewCrowdSubmit.bind(this);\n    this.sendCrowdFundGoalSubmit = this.sendCrowdFundGoalSubmit.bind(this);\n\n\n    this._initNear().then(() => {\n      this.setState({\n        connected: true,\n        signedIn: !!this._accountId,\n        accountId: this._accountId,\n        balance: this._balance,\n      });\n    }); \n  }\n\n  handleNewCrowdChange(event) {\n    console.log(\"募捐活动名称：\" + event.target.value);\n    this.setState({new_crowdfunding_theme: event.target.value});\n  }\n\n  handleNewReceiverChange(event) {\n    console.log(\"募捐活动接收账户：\" + event.target.value);\n    this.setState({new_crowdfunding_receiver: event.target.value});\n  }\n\n  handleNewFundingGoalChange(event) {\n    console.log(\"募捐活动筹集目标金额：\" + event.target.value);\n    this.setState({new_crowdfunding_funding_goal: event.target.value});\n  }\n\n  handlewCrowdFundingNumChange(event) {\n    console.log(\"参与募捐活动的编号：\" + event.target.value);\n    this.setState({crowdfunding_num: event.target.value});\n  }\n\n  handlewCrowdFundingGoalChange(event) {\n    console.log(\"参与募捐的金额：\" + event.target.value);\n    this.setState({crowdfunding_goal: event.target.value});\n  }\n\n  createNewCrowdSubmit(event) {\n    this.createNewCrowd();\n    event.preventDefault();\n  }\n\n  async createNewCrowd() {\n    let num_campagins = await this._contract.newCampaign({\"theme\":this.state.new_crowdfunding_theme, \"receiver\":this.state.new_crowdfunding_receiver, \"number_funders\":0, \"funding_goal\":Number(this.state.new_crowdfunding_funding_goal)});\n    if(num_campagins > 0 ) {\n      alert(\"合约创建成功，合约编号：\" + num_campagins);\n      if (this._accountId) {\n        await this.refreshAccountStats();\n      }\n    }\n  }\n\n  sendCrowdFundGoalSubmit(event) {\n    this.bidCrowdFund();\n    event.preventDefault();\n  }\n\n  async bidCrowdFund() {\n    let funder_number = await this._account.functionCall({\n                                                    contractId: this.state.contract_accountId,\n                                                    methodName: \"bid\",\n                                                    args: {\n                                                      num_campagins: Number(this.state.crowdfunding_num),\n                                                    },\n                                                    gas: \"300000000000000\",\n                                                    attachedDeposit: utils.format.parseNearAmount(this.state.crowdfunding_goal),\n                                                  });\n    //let funder_number = await this._contract.bid({\"num_campagins\":Number(this.state.crowdfunding_num)});\n    if(funder_number > 0 ) {\n      console.log(\"第：\" + funder_number + \"位捐赠人\");\n      if (this._accountId) {\n        await this.refreshAccountStats();\n      }\n    }\n  }\n\n  async withdrawToReceiver(numCampagins) {\n    if (window.confirm(\"您确定转账吗?\")) {\n      let accountBalance = await this._contract.withdraw_to_receiver({\"num_campagins\":numCampagins});\n      this.setState({\n        balance: accountBalance,\n      });\n      if (this._accountId) {\n        await this.refreshAccountStats();\n      }\n    } \n  }\n\n  async _initNear() {\n    const nearConfig = {\n      networkId: 'default',\n      nodeUrl: 'https://rpc.testnet.near.org',\n      contractName: this.state.contract_accountId,\n      walletUrl: 'https://wallet.testnet.near.org',\n    };\n     const keyStore = new nearAPI.keyStores.BrowserLocalStorageKeyStore();\n     const near = await nearAPI.connect(Object.assign({ deps: { keyStore } }, nearConfig));\n     this._keyStore = keyStore;\n     this._nearConfig = nearConfig;\n     this._near = near;\n    \n     this._walletConnection = new nearAPI.WalletConnection(near, this.state.contract_accountId);\n     this._accountId = this._walletConnection.getAccountId();\n     this._account = this._walletConnection.account();\n     this._balance = (await this._account.getAccountBalance()).total;\n     console.log(\"_accountId=\" + this._accountId + \", _account=\" + this._account);\n     //\n     this._contract = new nearAPI.Contract(this._account, this.state.contract_accountId, {\n     viewMethods: ['get_crowdFunding_by_num_campagins', 'get_all_crowdFunding', 'get_funders_by_num_campagins'],\n      changeMethods: ['newCampaign', 'bid', 'withdraw_to_receiver'],\n     });\n\n    if (this._accountId) {\n      await this.refreshAccountStats();\n    }\n  }\n\n  async refreshAccountStats() {\n    let crowdFunding_campagin_arry:CrowdFunding[]|undefined|null = await this._contract.get_all_crowdFunding();\n    for(var i=0; i<crowdFunding_campagin_arry.length; i++){\n      let crowdFunding_campagin_item = crowdFunding_campagin_arry[i];\n      crowdFunding_campagin_item.num_campagins = i + 1;\n      this.state.crowdFunding_campagins.push(crowdFunding_campagin_item);\n      //\n      let crowdFunding_funding_arry:Funder[]|undefined|null = await this._contract.get_funders_by_num_campagins({num_campagins: crowdFunding_campagin_item.num_campagins});\n      if(crowdFunding_funding_arry.length > 0 ) {\n        this.state.crowdFunding_funding_map.set(crowdFunding_campagin_item.num_campagins, crowdFunding_funding_arry);\n      }\n    }\n  }\n\n  async requestSignIn() {\n    const appTitle = '去中心化募捐平台';\n    await this._walletConnection.requestSignIn(\n      this.state.contract_accountId,\n      appTitle\n    )\n  }\n\n  async logOut() {\n    this._walletConnection.signOut();\n    this._accountId = null;\n    this.setState({\n      signedIn: !!this._accountId,\n      accountId: this._accountId,\n      balance: this._balance,\n    })\n  }\n\n  render() {\n    console.log(\"call render().\");\n    const YOCTO_TO_NEAR = 1000000000000000000000000;\n    const content = !this.state.connected ? (\n      <div>\n        正在链接NEAR钱包 ...\n        <span className=\"spinner-grow spinner-grow-sm\" role=\"status\" aria-hidden=\"true\"></span>\n      </div>\n    ) : (this.state.signedIn ? (\n      <div>\n        <div className=\"float-right\">\n          <button className=\"btn btn-outline-secondary\" onClick={() => this.logOut()}>退出</button>\n        </div>\n        <h5><span className=\"font-weight-bold\">当前登陆NEAR账号：{this.state.accountId}, 账号余额：{this.state.balance} yoctoNEAR (≈{this.state.balance/YOCTO_TO_NEAR} NEAR)</span></h5>\n        <div>\n      </div>\n      {\n        this.state.contract_sign_accountId === this.state.accountId ? \n        <div>\n          <h6><span className=\"font-weight-bold\">您有权创建募捐活动</span></h6>\n          <hr></hr>\n          <label style={{marginTop:\"10px\"}}> 〓 创建募捐活动〓 </label>\n          <form onSubmit={this.createNewCrowdSubmit}>\n            <label>活动名称： <input type=\"text\" style={{marginLeft:\"10px\"}} value={this.state.new_crowdfunding_theme} onChange={(event) => {this.handleNewCrowdChange(event)}} /> </label><br/>\n            <label>接收募捐账户：<input type=\"text\" style={{marginLeft:\"10px\"}} value={this.state.new_crowdfunding_receiver} onChange={(event) => {this.handleNewReceiverChange(event)}} /> </label><br/>\n            <label>募捐目标金额： <input type=\"number\" style={{marginLeft:\"10px\"}} value={this.state.new_crowdfunding_funding_goal} onChange={(event) => {this.handleNewFundingGoalChange(event)}} /> NEAR </label><br/>\n            <input type=\"submit\" value=\"提交\" />\n          </form>\n\n          <hr></hr>\n          <div style={{fontSize: '16px'}}>\n          <label> 〓 已创建的募捐活动列表 〓 </label> <br/>\n            {\n                this.state.crowdFunding_campagins.map(item=>(\n                    <li key={item} >『编号』：{item.num_campagins},『活动名称』：{item.theme},『募捐接收账户』：{item.receiver},『募资目标金额』：{item.funding_goal}yoctoNEAR (≈{item.funding_goal/YOCTO_TO_NEAR} NEAR),『募资参与人数』：{item.number_funders},『已经募集的金额』：{item.total_amount}yoctoNEAR (≈{item.total_amount/YOCTO_TO_NEAR} NEAR)\n                      <br/>\n                      <label style={{fontSize: '13px'}}>  ✿ 募捐人列表 </label> <br/>\n                      <div style={{fontSize: '10px'}}>\n                        {\n                          this.state.crowdFunding_funding_map.get(item.num_campagins) != null && this.state.crowdFunding_funding_map.get(item.num_campagins) != undefined && this.state.crowdFunding_funding_map.get(item.num_campagins).length > 0 ? (\n                            this.state.crowdFunding_funding_map.get(item.num_campagins).map(item12=>(\n                              <div key={item12}> ◦  捐赠人地址：{item12.addr +\", \"} 捐赠金额：{item12.amount} yoctoNEAR (≈{item12.amount/YOCTO_TO_NEAR} NEAR)<br/></div>\n                            )  \n                          )\n                          ):(\n                              <label> 无捐赠人.</label> \n                          )\n                        }\n                      </div>\n                    </li>\n                  ))\n            }\n          </div>\n          <br/>\n          \n          <hr></hr>\n        </div>\n        \n       : \n       \n        this.state.contract_accountId === this.state.accountId ? \n        <div>\n        <h6><span className=\"font-weight-bold\">转账到募捐活动接收账户</span></h6>\n        {\n            (\n            this.state.crowdFunding_campagins.map(item=>(\n              <div>\n                <label>\n                  『编号』: {item.num_campagins},『活动名称』: {item.theme},『募捐接收账户』: {item.receiver},『募资目标金额』：{item.funding_goal}yoctoNEAR (≈{item.funding_goal/YOCTO_TO_NEAR} NEAR),『已募捐金额』: {item.total_amount} yoctoNEAR (≈{item.total_amount/YOCTO_TO_NEAR} NEAR),『募捐活动接收账户收到的金额』: {item.withdraw_amount} yoctoNEAR (≈{item.withdraw_amount/YOCTO_TO_NEAR} NEAR)\n                  {\n                    item.total_amount > item.withdraw_amount ?\n                      <label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n                        <button className=\"btn btn-primary\" onClick={() => this.withdrawToReceiver(item.num_campagins)}>转账到募捐活动接收账户</button>\n                      </label> \n                    :\n                      <p>&nbsp;&nbsp;</p>\n                  }\n                  </label>\n                <br/><hr/>\n              </div>\n            ))\n            )\n          }\n        </div>\n\n        :\n          <div>\n          <h6><span className=\"font-weight-bold\">欢迎您参与募捐活动</span></h6>\n          <hr></hr>\n          <label> 请选择您要参与的募捐活动 </label> <br/>\n          {\n            (\n            this.state.crowdFunding_campagins.map(item=>(\n              <div>\n                <label>『编号』: {item.num_campagins},『活动名称』: {item.theme},『募捐接收账户』: {item.receiver},『募资目标金额』：{item.funding_goal}yoctoNEAR (≈{item.funding_goal/YOCTO_TO_NEAR} NEAR),『募捐人数』: {item.number_funders} </label>\n                <br/>\n              </div>\n            ))\n            )\n          }\n          <hr></hr>\n          <form onSubmit={this.sendCrowdFundGoalSubmit}>\n            <label>活动编号： <input type=\"text\" style={{marginLeft:\"10px\"}} value={this.state.crowdfunding_num} onChange={(event) => {this.handlewCrowdFundingNumChange(event)}} /> (-请选择上面的活动编号-)</label><br/>\n            <label>募捐金额： <input type=\"number\" style={{marginLeft:\"10px\"}} value={this.state.crowdfunding_goal} onChange={(event) => {this.handlewCrowdFundingGoalChange(event)}} /> NEAR</label><br/>\n            <input type=\"submit\" value=\"提交\" />\n          </form>\n        </div> \n      }\n      </div>\n    ) : (\n      <div style={{ marginBottom: \"10px\" }}>\n        <button\n          className=\"btn btn-primary\"\n          onClick={() => this.requestSignIn()}>登陆NEAR钱包</button>\n      </div>\n    ));\n    return (\n        <div className=\"px-5\">\n          <h1>NEAR去中心化募捐活动平台</h1>\n          <span className=\"font-weight-light\">(提示⚠️：募捐活动合约已经部署到测试链，合约账户：{this.state.contract_accountId}，授权账户：{this.state.contract_sign_accountId})</span>\n          {content}\n        </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n    <App />, \n    document.getElementById('root')\n);\n"],"sourceRoot":""}